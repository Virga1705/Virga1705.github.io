<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>вирга</title>
<style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f4; /* Light mode default */
      color: #111; /* Light mode default text */
      /* Mencegah seleksi teks */
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none;    /* Firefox */
      -ms-user-select: none;     /* Internet Explorer/Edge */
      user-select: none;         /* Standard */
      /* Mencegah menu konteks (klik kanan) secara global */
      -webkit-touch-callout: none; /* Untuk iOS, mencegah menu pop-up saat long-press */
      overflow-x: hidden; /* Mencegah overflow saat sidebar terbuka */
      transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for dark mode */
    }

    nav {
      background-color: #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    nav h1 {
      margin: 0;
      font-size: 1.5rem;
      color: #111;
      transition: color 0.3s ease;
    }

    /* Hamburger Menu Icon */
    .hamburger-icon {
      width: 30px;
      height: 20px;
      position: relative;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 1001;
      margin-left: auto; /* Dorong ke kanan navbar */
    }

    .hamburger-icon span {
      display: block;
      width: 100%;
      height: 3px;
      background-color: #333;
      border-radius: 2px;
      transition: all 0.3s ease-in-out;
    }

    /* Animasi ikon hamburger menjadi silang */
    .hamburger-icon.open span:nth-child(1) {
      transform: translateY(8.5px) rotate(45deg);
    }
    .hamburger-icon.open span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-icon.open span:nth-child(3) {
      transform: translateY(-8.5px) rotate(-45deg);
    }

    /* Sidebar Menu */
    .sidebar {
      height: 100%;
      width: 0; /* Awalnya tersembunyi */
      position: fixed;
      z-index: 999;
      top: 0;
      right: 0;
      background-color: rgba(255, 255, 255, 0.95);
      overflow-x: hidden;
      transition: 0.5s;
      padding-top: 60px;
      box-shadow: -5px 0 15px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .sidebar.open {
      width: 250px;
    }

    /* Wrapper untuk copyright di sidebar */
    .copyright-wrapper {
        display: flex;
        justify-content: center; /* Memusatkan konten di dalam wrapper */
        align-items: center; /* Penyelarasan vertikal */
        margin: 15px 0; /* Margin dari elemen lain di sidebar */
        padding: 0 20px; /* Padding sisi agar tidak terlalu mepet */
        width: 100%; /* Agar wrapper mengambil lebar penuh sidebar */
        box-sizing: border-box;
    }

    /* Copyright di sidebar */
    .sidebar .copyright-text {
      font-size: 0.85rem;
      color: #666;
      margin: 0; /* Reset margin yang mungkin ada dari aturan lain */
      text-align: center;
      transition: color 0.3s ease;
    }

    /* Gaya untuk card di dalam sidebar (dilekatkan lagi agar jelas) */
    .sidebar-card {
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px; /* Kotak dengan sudut melengkung */
      margin: 10px 0;
      padding: 15px;
      width: 80%;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: background-color 0.2s ease, transform 0.1s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      font-size: 1.1rem;
      font-weight: bold;
      color: #333;
    }

    .sidebar-card:hover {
      background-color: #e9e9e9;
      transform: translateY(-2px);
    }

    /* Gaya untuk pengumuman card di sidebar */
    .sidebar-announcement-card {
      background-color: #e0f7fa;
      border: 1px solid #b2ebf2;
      border-radius: 8px;
      margin: 15px 0;
      padding: 15px;
      width: 80%;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      font-size: 0.95rem;
      color: #007bff;
      font-weight: 500;
      line-height: 1.4;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease-in-out, background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
      opacity: 0;
    }

    .sidebar-announcement-card.visible {
        opacity: 1;
    }

    .sidebar .closebtn {
      position: absolute;
      top: 15px;
      right: 25px;
      font-size: 36px;
      margin-left: 50px;
      cursor: pointer;
      color: #888;
      transition: color 0.3s ease;
    }

    header {
      background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://files.catbox.moe/qjlxeb.jpg') no-repeat center center/cover;
      color: white;
      padding: 6rem 1rem 2rem 1rem;
      text-align: center;
    }

    header h2 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .typing {
      font-size: 1.5rem;
      font-weight: bold;
      min-height: 2rem;
    }

    .social {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 1.5rem;
    }

    .social a img {
      width: 32px;
      height: 32px;
      filter: brightness(1.2);
    }

    .about {
      background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://files.catbox.moe/0kka4l.jpg') no-repeat center center/cover;
      color: white;
      padding: 3rem 1rem;
      text-align: center;
    }

    /* CONTAINER untuk layout grid */
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 2rem;
    }

    /* Gaya Dasar Card */
    .virga-card {
      background-color: #ffffff;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 15px;
      cursor: pointer;
      transition: transform 0.2s ease-in-out, opacity 0.5s ease-out, background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      width: 300px;
      min-height: 150px;
      text-decoration: none;
      box-sizing: border-box;

      display: flex;
      align-items: flex-start;
      position: relative; /* Untuk positioning tombol share */

      opacity: 0;
      transform: scale(0.8);

      outline: none; /* ADDED: Remove default focus outline from the card itself */
    }

    .virga-card.zoom-in {
      opacity: 1;
      transform: scale(1);
    }

    .virga-card:hover {
      transform: translateY(-5px);
    }

    /* ADDED: Ensure no outline on focus for accessibility, if needed */
    .virga-card:focus {
        outline: none;
    }

    .virga-card .card-logo {
      width: 60px;
      height: 60px;
      flex-shrink: 0;
      object-fit: contain;
      pointer-events: none; /* Menjaga agar gambar tidak dapat diklik terpisah dari link card */
    }

    .virga-card .card-content-wrapper {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      margin: 0 15px;
    }

    .virga-card .card-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #333;
      margin: 0 0 5px 0;
      text-align: left;
      transition: color 0.3s ease;
    }

    .virga-card .card-description {
      font-size: 0.9rem;
      color: #666;
      margin: 0;
      line-height: 1.4;
      text-align: left;
      transition: color 0.3s ease;
    }

    /* --- Gaya untuk Logo di Kiri (Card 1 dan 3) --- */
    .align-left-logo .card-logo {
      margin-right: 15px;
    }

    .align-left-logo .card-content-wrapper {
      order: 1;
    }

    /* --- Gaya untuk Logo di Kanan (Card 2) --- */
    .align-right-logo {
      flex-direction: row-reverse;
    }

    .align-right-logo .card-logo {
      margin-left: 15px;
    }

    .align-right-logo .card-content-wrapper {
      order: 1;
      margin-right: 15px;
      margin-left: 0;
    }

    /* Gaya untuk "Read More" */
    .read-more-text {
      display: inline;
    }

    .read-more-toggle {
      color: #007bff;
      cursor: pointer;
      font-weight: bold;
      margin-left: 5px;
      transition: color 0.3s ease;
    }

    .read-more-ellipsis {
      display: inline;
    }

    /* Sembunyikan sebagian teks saat tidak diperluas */
    .card-description.collapsed .more-text {
      display: none;
    }

    /* Sembunyikan elipsis saat diperluas */
    .card-description:not(.collapsed) .read-more-ellipsis {
      display: none;
    }

    /* SHARE BUTTON STYLES */
    .share-button-container {
      position: absolute;
      bottom: 10px;
      right: 10px;
      cursor: pointer;
      z-index: 5; /* Ensure it's above card content */
      transition: transform 0.2s ease-in-out;
      outline: none; /* Remove default focus outline */
    }

    .share-button-container:hover {
        transform: scale(1.1);
    }

    /* Add this rule to remove outline on focus, for accessibility */
    .share-button-container:focus {
        outline: none;
    }

    .share-button-container img {
      width: 24px;
      height: 24px;
      filter: grayscale(100%) brightness(1.5); /* Default icon style */
      transition: filter 0.3s ease-in-out;
    }

    /* Blinking effect for share icon */
    .share-button-container.blink img {
        filter: brightness(0) invert(1) sepia(1) saturate(5000%) hue-rotate(200deg); /* Change to a distinct color, e.g., blue */
    }

    /* Tooltip / Notification for "Copied!" */
    .share-tooltip {
        position: absolute;
        bottom: 40px; /* Adjust position relative to the share button */
        right: 0px;
        background-color: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease-in-out;
        transform: translateX(50%); /* Center the tooltip */
    }

    .share-tooltip.show {
        opacity: 1;
    }

    /* ANIMASI KEDIP UNTUK KARTU YANG DIHIGHLIGHT */
    @keyframes card-highlight-blink {
        0%, 100% {
            border-color: #ddd; /* Warna border default */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Shadow default */
        }
        50% {
            border-color: #007bff; /* Warna biru saat kedip */
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.6); /* Shadow biru saat kedip */
        }
    }

    .virga-card.highlight-blink {
        animation: card-highlight-blink 1s ease-in-out 3; /* Kedip 3 kali */
    }


    footer {
      text-align: center;
      padding: 2rem 1rem;
      background-color: #f0f0f0;
      color: #555;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* --- GAYA MODAL UMUM (DARI NARUTO SENKI) --- */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none; /* Defaultnya tersembunyi */
      justify-content: center;
      align-items: center;
      z-index: 1002; /* Pastikan modal di atas sidebar */
      /* Mencegah seleksi teks dan klik kanan pada modal overlay */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    .modal {
      background: white;
      border-radius: 12px;
      padding: 20px;
      width: 80%;
      max-width: 300px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      text-align: center;
      position: relative;
      /* Mencegah seleksi teks dan klik kanan pada modal */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    /* Bagian body modal agar bisa di-scroll */
    #modal-body {
        max-height: 200px; /* Atur tinggi maksimum untuk konten */
        overflow-y: auto; /* Aktifkan scroll vertikal jika konten melebihi max-height */
        padding-right: 10px; /* Memberi ruang untuk scrollbar */
        text-align: left; /* Rata kiri teks di dalam modal body */
    }

    .modal-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }

    .modal-buttons a {
      text-decoration: none;
      padding: 10px;
      border: 2px solid black;
      border-radius: 10px;
      font-weight: bold;
      color: black;
      background: white;
      transition: all .2s ease-in-out;
      /* Mencegah seleksi teks dan klik kanan pada tombol modal */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    .modal-buttons a:hover {
      background: black;
      color: white;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      background: #ff5c5c;
      color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
      /* Mencegah seleksi teks dan klik kanan pada tombol tutup */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    .close-btn:hover {
      background: #e04444;
    }
  </style>
</head>
<body oncontextmenu="return false;">
  <nav>
    <h1>ㅤвирга</h1>
    <div class="hamburger-icon" onclick="toggleSidebar()">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>

  <div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">×</a>
    <div class="copyright-wrapper">
        <p class="copyright-text">© 2025 вирга</p>
    </div>
    <div id="announcement-area" class="sidebar-announcement-card"></div>
    <div class="sidebar-card" onclick="openGeneralModal('donasi')">Donasi</div>
    <div class="sidebar-card" onclick="openGeneralModal('credits')">Credits</div>
  </div>

  <header>
    <h2>Welcome To My Website</h2>
    <div class="typing" id="typing"></div>
    <div class="social">
      <a href="https://instagram.com/i.lifenot4you" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" draggable="false">
      </a>
      <a href="https://youtube.com/@VVIRGAFS" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube" draggable="false">
      </a>
      <a href="mailto:virga1705@gmail.com">
        <img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email" draggable="false">
      </a>
      <a href="https://t.me/vfs1705" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram" draggable="false">
      </a>
    </div>
  </header>

  <section class="about">
    <h2>About Me</h2>
    <p>I'm just doing my hobby and a random person who makes random content.Especially content about modified applications or games</p>
  </section>

  <div class="container">

    <a href="https://Virga1705.github.io/NarutoSenki.html#card-waifu-war-v1" class="virga-card align-left-logo" id="card-naruto-senki" data-card-id="card-naruto-senki" data-card-title="Naruto Senki">
      <img src="https://files.catbox.moe/ngsl57.jpg" alt="Naruto Senki Logo" class="card-logo" draggable="false">
      <div class="card-content-wrapper">
        <p class="card-title">Naruto Senki</p>
        <p class="card-description collapsed" data-full-text="Modifikasi game Naruto Senki dengan karakter dan fitur baru yang seru. Nikmati pertempuran epik dan skill unik yang belum pernah ada sebelumnya. Tambahan level dan misi baru akan menantang kemampuan bermainmu.">
          Modifikasi game Naruto Senki dengan karakter dan fitur baru yang seru. <span class="more-text">Nikmati pertempuran epik dan skill unik yang belum pernah ada sebelumnya. Tambahan level dan misi baru akan menantang kemampuan bermainmu.</span>
          <span class="read-more-ellipsis">...</span>
          <span class="read-more-toggle">Read More</span>
        </p>
      </div>
      <div class="share-button-container" onclick="handleDirectShare(this); event.preventDefault();">
        <img src="https://files.catbox.moe/40ynkg.png" alt="Share" draggable="false">
        <span class="share-tooltip">Copied!</span>
      </div>
    </a>

    <a href="https://Virga1705.github.io/pixellab.html#card-pixellab-theme-ios" class="virga-card align-right-logo" id="card-pixellab" data-card-id="card-pixellab" data-card-title="PixelLab">
      <img src="https://files.catbox.moe/97vkic.png" alt="PixelLab Logo" class="card-logo" draggable="false">
      <div class="card-content-wrapper">
        <p class="card-title">PixelLab</p>
        <p class="card-description collapsed" data-full-text="Aplikasi editing foto dengan berbagai tema dan font premium. Buat desain grafis profesional langsung dari ponsel Anda. Tambahan fitur filter dan efek terbaru.">
          Aplikasi editing foto dengan berbagai tema dan font premium. <span class="more-text">Buat desain grafis profesional langsung dari ponsel Anda. Tambahan fitur filter dan efek terbaru.</span>
          <span class="read-more-ellipsis">...</span>
          <span class="read-more-toggle">Read More</span>
        </p>
      </div>
      <div class="share-button-container" onclick="handleDirectShare(this); event.preventDefault();">
        <img src="https://files.catbox.moe/40ynkg.png" alt="Share" draggable="false">
        <span class="share-tooltip">Copied!</span>
      </div>
    </a>

    <a href="https://Virga1705.github.io/gg.html#card-gg-new-theme-icon" class="virga-card align-left-logo" id="card-game-guardian" data-card-id="card-game-guardian" data-card-title="Game Guardian">
      <img src="https://files.catbox.moe/xqmdrq.png" alt="Game Guardian Logo" class="card-logo" draggable="false">
      <div class="card-content-wrapper">
        <p class="card-title">Game Guardian</p>
        <p class="card-description collapsed" data-full-text="Modifikasi Game Guardian dengan tema kustom dan fitur unik untuk pengalaman bermain game. Dapatkan akses ke fitur-fitur eksklusif dan optimasi performa. Cocok untuk para modder dan gamer sejati.">
          Modifikasi Game Guardian dengan tema kustom dan fitur <span class="more-text">unik untuk pengalaman bermain game.Dapatkan akses ke fitur-fitur eksklusif dan optimasi performa. Cocok untuk para modder dan gamer sejati.</span>
          <span class="read-more-ellipsis">...</span>
          <span class="read-more-toggle">Read More</span>
        </p>
      </div>
      <div class="share-button-container" onclick="handleDirectShare(this); event.preventDefault();">
        <img src="https://files.catbox.moe/40ynkg.png" alt="Share" draggable="false">
        <span class="share-tooltip">Copied!</span>
      </div>
    </a>
    
    <a href="https://Virga1705.github.io/gta-sa.html#card-gta-sa-intro" class="virga-card align-right-logo" id="card-gta-sa" data-card-id="card-gta-sa" data-card-title="GTA: SA">
      <img src="https://files.catbox.moe/97vkic.png" alt="GTA SA Logo" class="card-logo" draggable="false">
      <div class="card-content-wrapper">
        <p class="card-title">GTA: SA</p>
        <p class="card-description collapsed" data-full-text="Grand Theft Auto: San Andreas (GTA SA) adalah game aksi-petualangan dunia terbuka yang dikembangkan oleh Rockstar North dan diterbitkan oleh Rockstar Games.">
          Grand Theft Auto: San Andreas (GTA SA) adalah game aksi-petualangan<span class="more-text"> dunia terbuka yang dikembangkan oleh Rockstar North dan diterbitkan oleh Rockstar Games.</span>
          <span class="read-more-ellipsis">...</span>
          <span class="read-more-toggle">Read More</span>
        </p>
      </div>
      <div class="share-button-container" onclick="handleDirectShare(this); event.preventDefault();">
        <img src="https://files.catbox.moe/40ynkg.png" alt="Share" draggable="false">
        <span class="share-tooltip">Copied!</span>
      </div>
    </a>
  </div>

  <footer></footer>

  <div class="modal-overlay" id="popup">
    <div class="modal">
      <span class="close-btn" onclick="closeModal()">X</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    // JavaScript untuk Read More pada Card utama (TIDAK BERUBAH)
    document.addEventListener('DOMContentLoaded', function() {
      const toggleButtons = document.querySelectorAll('.read-more-toggle');

      toggleButtons.forEach(button => {
        button.addEventListener('click', function(event) {
          event.preventDefault();
          event.stopPropagation();

          const description = this.closest('.card-description');
          if (description) {
            description.classList.toggle('collapsed');
            this.textContent = description.classList.contains('collapsed') ? 'Read More' : 'Read Less';
          }
        });
      });
    });


    // JavaScript untuk Typing Effect (TIDAK BERUBAH)
    const texts = ["I am Milf Lover", "I am Mechanic", "I am Chill guy", "I am Sigma"];
    let count = 0;
    let index = 0;
    let currentText = '';
    let letter = '';

    (function type(){
      if (count === texts.length) count = 0;
      currentText = texts[count];
      letter = currentText.slice(0, ++index);
      document.getElementById('typing').textContent = letter;
      if (letter.length === currentText.length) {
        count++;
        index = 0;
        setTimeout(type, 1500);
      } else {
        setTimeout(type, 100);
      }
    })();

    // JavaScript untuk Zoom-in Animation (TIDAK BERUBAH)
    function checkZoom() {
      const cards = document.querySelectorAll('.virga-card');
      cards.forEach(card => {
        const cardTop = card.offsetTop;
        const windowBottom = window.scrollY + window.innerHeight;
        const windowTop = window.scrollY;
        const cardHeight = card.offsetHeight;
        const isVisible = (cardTop < windowBottom) && (cardTop + cardHeight > windowTop);

        if (isVisible) {
          card.classList.add('zoom-in');
        } else {
          card.classList.remove('zoom-in');
        }
      });
    }

    window.addEventListener('scroll', checkZoom);
    window.addEventListener('resize', checkZoom);
    window.addEventListener('load', checkZoom);

    // JavaScript untuk Sidebar (TIDAK BERUBAH)
    function toggleSidebar() {
      const sidebar = document.getElementById("mySidebar");
      const hamburgerIcon = document.querySelector(".hamburger-icon");
      if (sidebar.classList.contains("open")) {
        sidebar.classList.remove("open");
        hamburgerIcon.classList.remove("open");
        stopAnnouncementRotation();
      } else {
        sidebar.classList.add("open");
        hamburgerIcon.classList.add("open");
        startAnnouncementRotation();
      }
    }

    function closeSidebar() {
      document.getElementById("mySidebar").classList.remove("open");
      document.querySelector(".hamburger-icon").classList.remove("open");
      stopAnnouncementRotation();
    }

    window.addEventListener('click', function(event) {
      const sidebar = document.getElementById("mySidebar");
      const hamburgerIcon = document.querySelector(".hamburger-icon");
      const modalPopup = document.getElementById('popup');
      // Mengubah kondisi klik di luar: jika sidebar terbuka DAN yang diklik BUKAN sidebar, hamburger, atau modal popup, maka tutup sidebar.
      if (sidebar.classList.contains("open") && !sidebar.contains(event.target) && !hamburgerIcon.contains(event.target) && !modalPopup.contains(event.target)) {
        closeSidebar();
      }
      // Logika untuk menutup modal umum jika diklik di luar.
      if (modalPopup.style.display === 'flex' && !modalPopup.querySelector('.modal').contains(event.target) && !event.target.closest('.sidebar-card[onclick*="openGeneralModal"]')) {
          closeModal();
      }
    });

    // JavaScript untuk Pengumuman Multibahasa (Terjemahan Disesuaikan)
    const announcements = [
      { id: 'en', text: "If you want to translate this website into your preferred language, click the three dots in your browser and look for the translate feature. I recommend using Chrome browser." },
      { id: 'ru', text: "Если вы хотите перевести этот веб-сайт на предпочитаемый вами язык, нажмите на три точки в вашем браузере dan cari fungsi terjemahan. Saya merekomendasikan menggunakan browser Chrome." },
      { id: 'zh-CN', text: "如果您想将此网站翻译成 Anda akan menyukai bahasa Anda, klik tiga titik di browser Anda dan cari fitur terjemahan. Saya merekomendasikan menggunakan browser Chrome." },
      { id: 'ja', text: "このウェブサイトを希望の言語に翻訳したい場合は、ブラウザの三点リーダーをクリックして翻訳機能を探してください。Chromeブラウザの使用をお勧めします。" },
      { id: 'pt', text: "Se você deseja traduzir este site para o seu idioma preferido, clique nos três pontos do seu navegador e procure o recurso de tradução. Recomendo usar o navegador Chrome." },
      { id: 'fil', text: "Kung nais mong isalin ang website na ini ke bahasa yang Anda inginkan, i-click ang tatlong tuldok sa iyong browser dan hanapin ang tampok na pagsasalin. Inirerekomenda kong gamitin ang Chrome browser." },
      { id: 'vi', text: "Jika Anda ingin menerjemahkan situs web ini ke bahasa pilihan Anda, silakan klik tiga titik di browser Anda dan cari fitur terjemahan. Saya sarankan menggunakan browser Chrome." }
    ];
    let currentAnnouncementIndex = 0;
    let announcementInterval;

    function updateAnnouncement() {
      const announcementCard = document.getElementById('announcement-area');
      if (!announcementCard) return;

      announcementCard.classList.remove('visible');

      setTimeout(() => {
        announcementCard.textContent = announcements[currentAnnouncementIndex].text;
        announcementCard.classList.add('visible');
        currentAnnouncementIndex = (currentAnnouncementIndex + 1) % announcements.length;
      }, 500);
    }

    function startAnnouncementRotation() {
        updateAnnouncement();
        if (announcementInterval) clearInterval(announcementInterval);
        announcementInterval = setInterval(updateAnnouncement, 10000);
    }

    function stopAnnouncementRotation() {
        if (announcementInterval) {
            clearInterval(announcementInterval);
            announcementInterval = null;
            const announcementCard = document.getElementById('announcement-area');
            if (announcementCard) {
                announcementCard.classList.remove('visible');
            }
        }
    }

    // --- FUNGSI MODAL UMUM (untuk Donasi/Credits) ---
    function openGeneralModal(type) {
      const popup = document.getElementById('popup');
      const body = document.getElementById('modal-body');
      let content = '';
      let modalTitle = '';

      switch (type) {
        case 'credits':
          modalTitle = 'Credits';
          content = `
            <h3 style="font-size: 1.5rem; color:#333; margin-bottom:20px;">${modalTitle}</h3>
            <p style="font-size:1em; color:#333; margin-bottom:15px; text-align: left;">
                Di balik website ini, ada beberapa sumber yang telah berkontribusi:
                <br><a href="https://github.com/KanzakiisYU" target="_blank" style="color: #007bff; text-decoration: none; font-weight: bold;">KanzakiisYU</a> (untuk model Live2D)
                <br><a href="https://flaticon.com/" target="_blank" style="color: #007bff; text-decoration: none; font-weight: bold;">Flaticon</a> (untuk ikon-ikon yang digunakan)
                <br>Dan <b>Your Name</b> (sebagai pengembang website ini).
                <br><br>Tambahkan lebih banyak kredit di sini jika diinginkan:
                <br>Credit Tambahan 1: Nama Proyek A
                <br>Credit Tambahan 2: Nama Kontributor B
                <br>Credit Tambahan 3: Nama Sumber C
                <br>Credit Tambahan 4: Nama Proyek D
                <br>Credit Tambahan 5: Nama Kontributor E
                <br>Credit Tambahan 6: Nama Sumber F
                <br>Credit Tambahan 7: Nama Proyek G
                <br>Credit Tambahan 8: Nama Kontributor H
            </p>
          `;
          break;
        case 'donasi':
          modalTitle = 'Donasi';
          content = `
            <h3 style="font-size: 1.5rem; color:#333; margin-bottom:20px;">${modalTitle}</h3>
            <p style="font-size:1em; color:#333; margin-bottom:15px;">Dukung kami melalui pilihan di bawah ini:</p>
            <div class="modal-buttons">
              <a href="https://link.dana.id/your_dana_link" target="_blank">Donasi via Dana</a>
              <a href="https://paypal.me/your_paypal_link" target="_blank">Donasi via PayPal</a>
            </div>
            <p style="font-size:0.9em; color:#666; margin-top:15px;">Terima kasih atas dukungan Anda!</p>
          `;
          break;
        default:
          modalTitle = 'Informasi';
          content = `<h3 style="font-size: 1.5rem; color:#333; margin-bottom:20px;">${modalTitle}</h3><p>Konten tidak ditemukan.</p>`;
      }

      body.innerHTML = content;
      popup.style.display = 'flex'; // Tampilkan modal
      closeSidebar(); // Pastikan sidebar tertutup saat modal terbuka
    }

    function closeModal() {
      document.getElementById('popup').style.display = 'none';
    }

    // ************************************************
    // JavaScript untuk Fitur Share (DIREK KE NATIVE/COPY)
    // ************************************************

    // Fungsi untuk menerapkan efek kedip pada ikon share dan menampilkan tooltip
    function applyShareIconBlink(iconContainer) {
        if (!iconContainer) return;

        iconContainer.classList.add('blink');
        const tooltip = iconContainer.querySelector('.share-tooltip');
        if (tooltip) {
            tooltip.classList.add('show');
        }

        setTimeout(() => {
            iconContainer.classList.remove('blink');
            if (tooltip) {
                tooltip.classList.remove('show');
            }
        }, 1000); // Kedip selama 1 detik dan sembunyikan tooltip
    }

    // Fungsi untuk menyalin link ke clipboard
    function copyLinkToClipboard(link, iconContainer) {
        if (navigator.clipboard) {
            navigator.clipboard.writeText(link).then(() => {
                console.log('Link copied to clipboard:', link);
                applyShareIconBlink(iconContainer); // Terapkan efek kedip ke ikon aslinya
            }).catch(err => {
                console.error('Gagal menyalin link:', err);
                alert('Gagal menyalin link. Silakan salin secara manual: ' + link);
            });
        } else {
            // Fallback untuk browser yang tidak mendukung navigator.clipboard
            const tempInput = document.createElement('textarea');
            tempInput.value = link;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            alert('Link berhasil disalin ke clipboard: ' + link);
            applyShareIconBlink(iconContainer); // Terapkan efek kedip ke ikon aslinya
        }
    }

    // Fungsi utama untuk menangani klik ikon share (langsung ke native/copy)
    function handleDirectShare(clickedElement) {
        // Temukan elemen virga-card terdekat yang merupakan induk
        const virgaCard = clickedElement.closest('.virga-card'); 
        if (!virgaCard) {
            console.error("Elemen '.virga-card' induk tidak ditemukan untuk tombol share ini.");
            return; // Hentikan fungsi jika induk tidak ditemukan
        }

        const cardId = virgaCard.dataset.cardId; // Ambil ID dari data-card-id di .virga-card
        const cardTitle = virgaCard.dataset.cardTitle; // Ambil judul dari data-card-title di .virga-card
        const baseUrl = window.location.origin + window.location.pathname;
        const shareUrl = `${baseUrl}#${cardId}`; // Link akan menjadi base_url#ID_KARTU

        // Coba gunakan Web Share API (fitur share native browser)
        if (navigator.share) {
            navigator.share({
                title: cardTitle || document.title, // Gunakan judul kartu jika ada, atau judul dokumen
                text: `Check out this from ${cardTitle || document.title} ${shareUrl}`, // Format pesan share yang baru
                url: shareUrl
            }).then(() => {
                console.log('Berhasil dibagikan via Web Share API');
                applyShareIconBlink(clickedElement); // Terapkan kedip setelah sukses share
            }).catch((error) => {
                console.error('Gagal berbagi via Web Share API:', error);
                // Jika Web Share API gagal atau dibatalkan, salin link ke clipboard
                copyLinkToClipboard(shareUrl, clickedElement);
            });
        } else {
            // Jika Web Share API tidak tersedia, salin link ke clipboard
            copyLinkToClipboard(shareUrl, clickedElement);
        }
    }


    // Fungsi untuk menangani link langsung ke sebuah kartu (misalnya dari link yang dibagikan)
    let currentHighlightedCard = null; // Variabel untuk melacak kartu yang sedang di-highlight

    function scrollToCardFromHash() {
        if (window.location.hash) {
            const targetId = window.location.hash.substring(1); // Hapus '#'
            const targetElement = document.getElementById(targetId); // Cari elemen berdasarkan ID

            // Hapus highlight dari kartu yang sebelumnya di-highlight, jika ada
            if (currentHighlightedCard && currentHighlightedCard !== targetElement) {
                currentHighlightedCard.classList.remove('highlight-blink');
                // Pastikan gaya default diterapkan kembali jika animasi belum sepenuhnya kembali
                currentHighlightedCard.style.borderColor = '';
                currentHighlightedCard.style.boxShadow = '';
            }

            if (targetElement) {
                // Tambahkan sedikit penundaan untuk memastikan tata letak halaman stabil sebelum menggulir dan menganimasikan
                setTimeout(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // Terapkan animasi kedip
                    targetElement.classList.add('highlight-blink');
                    currentHighlightedCard = targetElement; // Set kartu yang sedang di-highlight

                    // Hapus kelas animasi setelah selesai (3 kedipan * 1 detik/kedip = 3 detik)
                    setTimeout(() => {
                        targetElement.classList.remove('highlight-blink');
                        currentHighlightedCard = null; // Reset
                        // Pastikan gaya default diterapkan kembali untuk berjaga-jaga
                        targetElement.style.borderColor = '';
                        targetElement.style.boxShadow = '';
                    }, 3000); // Durasi sesuai animasi: 3 kedipan * 1s/kedip = 3s
                }, 500); // Tunda scroll untuk memastikan elemen dirender
            }
        } else {
            // Jika hash dihapus, hapus highlight yang ada
            if (currentHighlightedCard) {
                currentHighlightedCard.classList.remove('highlight-blink');
                currentHighlightedCard.style.borderColor = '';
                currentHighlightedCard.style.boxShadow = '';
                currentHighlightedCard = null;
            }
        }
    }

    // Panggil fungsi saat halaman dimuat dan saat hash URL berubah
    window.addEventListener('load', scrollToCardFromHash);
    window.addEventListener('hashchange', scrollToCardFromHash);
    // ************************************************
    // Akhir dari JavaScript Fitur Share
    // ************************************************
  </script>

  <script src="https://l2dwidget.js.org/lib/L2Dwidget.min.js"></script>
  <script type="text/javascript">
    function getRandomMessage() {
        const messages = [
            'Hai, ada yang bisa saya bantu?',
            'Tuan, Lagi cari apa?',
            'Apakah Tuan Bosan?',
            'Tuan, mau bermain bersamaku?~'
        ];
        const randomIndex = Math.floor(Math.random() * messages.length);
        return messages[randomIndex];
    }

    L2Dwidget.init({
        model: {
            jsonPath: "https://raw.githubusercontent.com/KanzakiisYU/live2d-model/main/kurumi/model.json"
        },
        display: {
            position: "right",
            width: 200,
            height: 550,
            hOffset: 20,
            vOffset: -200
        },
        mobile: {
            show: true,
            scale: 1
        },
        dialog: {
            enable: true,
            script: {
                'every idle 10s': getRandomMessage(),
                'hover .star': '',
                'tap body': 'Hentai!',
                'tap face': getRandomMessage()
            }
        }
    });
  </script>

</body>
</html>